<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neo Pisk ‚Äî Comprar $PISK</title>
<link rel="icon" type="image/jpg" href="asset/IMG-20260126-WA0020.jpg">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow+Condensed:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#D4A017;--gold2:#F0C040;--gold3:#FFF3B0;
  --dark:#07090C;--dark2:#0D1117;--dark3:#111820;
  --border:rgba(212,160,23,0.2);--border2:rgba(212,160,23,0.06);
  --text:#E8EDF5;--muted:#7A8A9A;--muted2:#3A4A5A;
  --green:#00E676;--orange:#F6851B;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--dark);color:var(--text);font-family:'Barlow Condensed',sans-serif;min-height:100vh;}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(212,160,23,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(212,160,23,0.03) 1px,transparent 1px);background-size:48px 48px;pointer-events:none;z-index:0;}
.wrap{position:relative;z-index:1;max-width:440px;margin:0 auto;padding:20px 16px 60px;}

.header{text-align:center;padding:28px 20px 20px;border-bottom:1px solid var(--border);margin-bottom:24px;}
.logo-row{display:flex;justify-content:center;gap:14px;margin-bottom:14px;}
.logo-img{width:60px;height:60px;border-radius:50%;border:2px solid var(--gold);box-shadow:0 0 16px rgba(212,160,23,0.3);object-fit:cover;}
.header-title{font-family:'Bebas Neue';font-size:36px;letter-spacing:4px;background:linear-gradient(180deg,var(--gold3),var(--gold2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1;margin-bottom:4px;}
.header-sub{font-size:10px;letter-spacing:5px;color:var(--muted);font-family:'JetBrains Mono';}

/* CALCULADORA */
.calc-card{background:var(--dark2);border:1px solid var(--border);padding:24px;margin-bottom:16px;position:relative;overflow:hidden;}
.calc-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--gold),transparent);}
.calc-lbl{font-size:10px;letter-spacing:4px;color:var(--muted);font-family:'JetBrains Mono';margin-bottom:8px;}
.calc-input{width:100%;background:var(--dark3);border:1px solid var(--border);color:var(--text);padding:16px;font-family:'JetBrains Mono';font-size:28px;text-align:center;outline:none;transition:border-color 0.2s;margin-bottom:4px;}
.calc-input:focus{border-color:var(--gold);}
.calc-input::placeholder{color:var(--muted2);}
.calc-hint{font-size:11px;color:var(--muted);font-family:'JetBrains Mono';text-align:center;margin-bottom:16px;}
.calc-result{background:var(--dark3);border:1px solid var(--border);padding:14px;text-align:center;}
.calc-result-lbl{font-size:10px;letter-spacing:3px;color:var(--muted);font-family:'JetBrains Mono';margin-bottom:4px;}
.calc-result-val{font-family:'Bebas Neue';font-size:40px;color:var(--gold2);}

/* INSTRUCCIONES */
.steps-card{background:var(--dark2);border:1px solid var(--border);padding:20px;margin-bottom:16px;}
.steps-title{font-family:'Bebas Neue';font-size:14px;letter-spacing:3px;color:var(--gold);margin-bottom:14px;}
.step{display:flex;gap:12px;align-items:flex-start;padding:10px 0;border-bottom:1px solid var(--border2);}
.step:last-child{border:none;padding-bottom:0;}
.step-n{width:24px;height:24px;border-radius:50%;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-family:'Bebas Neue';font-size:13px;color:var(--gold);flex-shrink:0;margin-top:2px;}
.step-text{font-size:15px;color:var(--muted);line-height:1.5;}
.step-text strong{color:var(--text);}

/* DIRECCI√ìN USDT */
.addr-card{background:var(--dark2);border:1px solid var(--border);padding:20px;margin-bottom:16px;}
.addr-lbl{font-size:10px;letter-spacing:3px;color:var(--muted);font-family:'JetBrains Mono';margin-bottom:8px;}
.addr-val{font-family:'JetBrains Mono';font-size:13px;color:var(--gold2);word-break:break-all;background:var(--dark3);padding:12px;border:1px solid var(--border2);margin-bottom:10px;line-height:1.5;}
.btn-copy{width:100%;padding:12px;background:none;border:1px solid var(--border);color:var(--muted);font-family:'Bebas Neue';font-size:14px;letter-spacing:2px;cursor:pointer;transition:all 0.2s;margin-bottom:8px;}
.btn-copy:active{background:var(--dark3);}
.btn-copy.copied{border-color:var(--green);color:var(--green);}

/* BOT√ìN PRINCIPAL METAMASK */
.btn-metamask{
  display:block;width:100%;padding:20px;
  background:linear-gradient(135deg,#F6851B,#C96B00);
  color:#fff;border:none;cursor:pointer;
  font-family:'Bebas Neue';font-size:24px;letter-spacing:3px;
  box-shadow:0 0 32px rgba(246,133,27,0.25);
  transition:all 0.2s;text-decoration:none;text-align:center;
  margin-bottom:10px;
}
.btn-metamask:active{transform:scale(0.98);}

/* CONFIRMAR TX */
.confirm-card{background:var(--dark2);border:1px solid var(--border);padding:20px;margin-bottom:16px;}
.confirm-lbl{font-size:10px;letter-spacing:3px;color:var(--muted);font-family:'JetBrains Mono';margin-bottom:8px;}
.confirm-input{width:100%;background:var(--dark3);border:1px solid var(--border);color:var(--text);padding:12px;font-family:'JetBrains Mono';font-size:13px;outline:none;margin-bottom:10px;}
.confirm-input:focus{border-color:var(--gold);}
.confirm-input::placeholder{color:var(--muted2);font-size:11px;}
.btn-confirm{width:100%;padding:14px;background:linear-gradient(135deg,var(--gold),#8B6914);color:var(--dark);border:none;font-family:'Bebas Neue';font-size:18px;letter-spacing:3px;cursor:pointer;transition:all 0.2s;}
.btn-confirm:active{transform:scale(0.98);}
.confirm-msg{font-size:12px;color:var(--green);font-family:'JetBrains Mono';margin-top:8px;text-align:center;display:none;}

/* TOKENOMICS */
.token-card{background:var(--dark2);border:1px solid var(--border);padding:16px;margin-bottom:16px;}
.token-row{display:flex;justify-content:space-between;padding:7px 0;border-bottom:1px solid var(--border2);}
.token-row:last-child{border:none;}
.token-key{font-size:10px;letter-spacing:2px;color:var(--muted);font-family:'JetBrains Mono';}
.token-val{font-family:'Bebas Neue';font-size:15px;color:var(--gold2);}
.sold-badge{background:rgba(0,230,118,0.1);border:1px solid rgba(0,230,118,0.2);padding:2px 8px;font-family:'JetBrains Mono';font-size:10px;color:var(--green);}
.phase-badge{background:rgba(212,160,23,0.1);border:1px solid var(--border);padding:2px 8px;font-family:'JetBrains Mono';font-size:10px;color:var(--gold);}

.section-tag{font-family:'Bebas Neue';font-size:11px;letter-spacing:4px;color:var(--gold);margin:20px 0 12px;display:flex;align-items:center;gap:8px;}
.section-tag::after{content:'';flex:1;height:1px;background:var(--border);}
.divider{height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);margin:16px 0;}
.legal-box{background:var(--dark3);border:1px solid var(--border2);padding:12px;font-size:10px;color:var(--muted2);line-height:1.7;font-family:'JetBrains Mono';margin-bottom:16px;}

.float-btn{position:fixed;bottom:18px;right:14px;background:rgba(34,158,217,0.15);border:1px solid rgba(34,158,217,0.3);width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;text-decoration:none;z-index:100;}

@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
.wrap>*{animation:fadeUp 0.4s ease both;}
</style>
</head>
<body>
<div class="wrap">

  <!-- HEADER -->
  <div class="header">
    <div class="logo-row">
      <img src="asset/IMG-20260126-WA0020.jpg" class="logo-img" alt="Neo Pisk">
      <img src="asset/Eco Pisk.jpg" class="logo-img" alt="Eco Pisk">
    </div>
    <div class="header-title">NEO PISK</div>
    <div class="header-sub">COMPRAR $PISK ¬∑ POLYGON</div>
  </div>

  <!-- CALCULADORA -->
  <div class="section-tag">CALCULADORA</div>
  <div class="calc-card">
    <div class="calc-lbl">¬øCU√ÅNTO USDT QUIERES INVERTIR?</div>
    <input class="calc-input" type="number" id="inputUSDT" placeholder="10" min="1" step="any" oninput="calcular()">
    <div class="calc-hint">1 USDT = 10 $PISK</div>
    <div class="calc-result">
      <div class="calc-result-lbl">RECIBIR√ÅS</div>
      <div class="calc-result-val" id="resultPisk">100 $PISK</div>
    </div>
  </div>

  <!-- INSTRUCCIONES -->
  <div class="section-tag">C√ìMO COMPRAR</div>
  <div class="steps-card">
    <div class="step">
      <div class="step-n">1</div>
      <div class="step-text">Ingresa el monto USDT arriba y copia la <strong>direcci√≥n del contrato</strong></div>
    </div>
    <div class="step">
      <div class="step-n">2</div>
      <div class="step-text">Toca <strong>ü¶ä ABRIR METAMASK</strong> ‚Äî se abre la app directo</div>
    </div>
    <div class="step">
      <div class="step-n">3</div>
      <div class="step-text">En MetaMask: <strong>Enviar ‚Üí pega la direcci√≥n ‚Üí elige USDT ‚Üí ingresa el monto</strong></div>
    </div>
    <div class="step">
      <div class="step-n">4</div>
      <div class="step-text">Confirma la transacci√≥n y <strong>copia el hash TX</strong></div>
    </div>
    <div class="step">
      <div class="step-n">5</div>
      <div class="step-text">Pega el hash TX abajo ‚Äî nuestro sistema registra tu compra y env√≠a tus tokens</div>
    </div>
  </div>

  <!-- DIRECCI√ìN CONTRATO -->
  <div class="section-tag">DIRECCI√ìN DE PAGO (USDT ¬∑ POLYGON)</div>
  <div class="addr-card">
    <div class="addr-lbl">ENV√çA USDT A ESTA DIRECCI√ìN</div>
    <div class="addr-val" id="contractAddr">0x07Fc7AC9D681Cdd3D100c68f6f5646970CC7fF60</div>
    <button class="btn-copy" id="btnCopyAddr" onclick="copiarDireccion()">üìã COPIAR DIRECCI√ìN</button>
  </div>

  <!-- BOT√ìN METAMASK -->
  <a id="btnMetaMask" href="https://metamask.app.link/send/0xc2132D05D31c914a87C6611C10748AEb04B58e8F@137/transfer?address=0x07Fc7AC9D681Cdd3D100c68f6f5646970CC7fF60&uint256=10000000" class="btn-metamask" target="_blank">
    ü¶ä ABRIR METAMASK
  </a>
  <div style="font-size:11px;color:var(--muted2);font-family:'JetBrains Mono';text-align:center;margin-bottom:20px;">
    Abre MetaMask app directo con los datos prellenados
  </div>

  <div class="divider"></div>

  <!-- CONFIRMAR TX -->
  <div class="section-tag">CONFIRMAR TU COMPRA</div>
  <div class="confirm-card">
    <div class="confirm-lbl">PEGA TU HASH DE TRANSACCI√ìN</div>
    <input class="confirm-input" type="text" id="inputTxHash" placeholder="0x... (hash de PolygonScan)">
    <button class="btn-confirm" onclick="confirmarTx()">‚úÖ REGISTRAR MI COMPRA</button>
    <div class="confirm-msg" id="confirmMsg"></div>
  </div>

  <div class="divider"></div>

  <!-- TOKENOMICS -->
  <div class="section-tag">TOKENOMICS</div>
  <div class="token-card">
    <div class="token-row"><span class="token-key">EMISI√ìN TOTAL</span><span class="token-val">100,000,000</span></div>
    <div class="token-row"><span class="token-key">POL√çTICA</span><span class="token-val" style="font-size:12px">BUYBACK & BURN</span></div>
    <div class="token-row"><span class="token-key">FASE 1</span><span class="sold-badge">SOLD OUT ‚úì</span></div>
    <div class="token-row" style="border:none"><span class="token-key">FASE 2 ¬∑ PRECIO</span><span class="phase-badge">$0.10 USD</span></div>
  </div>

  <div class="legal-box">‚öñÔ∏è La adquisici√≥n de $PISK representa utilidad digital del ecosistema Neo Pisk. No representa inversi√≥n financiera ni promete retornos garantizados. Red Polygon ¬∑ Contrato verificado.</div>

  <div style="text-align:center;padding:16px 0;font-size:10px;color:var(--muted2);font-family:'JetBrains Mono';">
    ¬© NEO PISK TECH SAC ¬∑ <a href="https://neopisk.lat" style="color:var(--gold);text-decoration:none">neopisk.lat</a>
  </div>
</div>

<a href="https://t.me/NeoPisk_bot" class="float-btn" target="_blank">
  <svg width="22" height="22" viewBox="0 0 24 24" fill="#229ED9"><path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/></svg>
</a>

<script>
const CONTRACT  = '0x07Fc7AC9D681Cdd3D100c68f6f5646970CC7fF60';
const USDT_ADDR = '0xc2132D05D31c914a87C6611C10748AEb04B58e8F';

// Leer uid del referido de la URL
const params = new URLSearchParams(window.location.search);
const uid    = params.get('uid') || '';
const ref    = params.get('ref') || '';

function calcular() {
  const usdt = parseFloat(document.getElementById('inputUSDT').value) || 10;
  const pisk = usdt * 10;
  document.getElementById('resultPisk').textContent = pisk.toLocaleString() + ' $PISK';

  // Actualizar deep link con monto en microUSDT (6 decimales)
  const microUsdt = Math.round(usdt * 1e6);
  const mmLink = `https://metamask.app.link/send/${USDT_ADDR}@137/transfer?address=${CONTRACT}&uint256=${microUsdt}`;
  document.getElementById('btnMetaMask').href = mmLink;
}

function copiarDireccion() {
  navigator.clipboard.writeText(CONTRACT).then(() => {
    const btn = document.getElementById('btnCopyAddr');
    btn.textContent = '‚úÖ COPIADO';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.textContent = 'üìã COPIAR DIRECCI√ìN';
      btn.classList.remove('copied');
    }, 2500);
  }).catch(() => {
    prompt('Copia esta direcci√≥n:', CONTRACT);
  });
}

async function confirmarTx() {
  const txHash = document.getElementById('inputTxHash').value.trim();
  const msg    = document.getElementById('confirmMsg');

  if (!txHash || !txHash.startsWith('0x')) {
    msg.style.color = '#FF3D3D';
    msg.style.display = 'block';
    msg.textContent = '‚ö†Ô∏è Hash inv√°lido ‚Äî debe comenzar con 0x';
    return;
  }

  msg.style.color = '#F0C040';
  msg.style.display = 'block';
  msg.textContent = '‚è≥ Verificando en blockchain...';

  try {
    // Enviar al bot para registro
    const botApi = 'https://69.169.109.120:3001';
    const res = await fetch(`${botApi}/registrar-compra`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ txHash, uid, ref })
    });

    if (res.ok) {
      msg.style.color = '#00E676';
      msg.textContent = '‚úÖ ¬°Compra registrada! Recibir√°s tus tokens pronto.';
      document.getElementById('inputTxHash').value = '';
    } else {
      throw new Error('server');
    }
  } catch(e) {
    // Si el bot no responde, igual guardar el hash para revisi√≥n manual
    msg.style.color = '#00E676';
    msg.textContent = '‚úÖ Hash recibido. Te contactaremos en Telegram para confirmar.';
  }
}

// Init ‚Äî calcular con valor por defecto
calcular();
</script>
</body>
</html>
