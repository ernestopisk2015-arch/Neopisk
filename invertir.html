<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neo Pisk - Official Investment Portal</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.8.1/web3.min.js"></script>

    <style>
        :root {
            --gold-primary: #d4af37;
            --gold-light: #f9e2af;
            --bg-dark: #0a0a0a;
            --card-bg: #151515;
            --neon-blue: #00d2ff;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            color: var(--gold-light); 
            margin: 0; 
            padding: 10px; 
            background: radial-gradient(circle at center, #1a1a1a 0%, #000000 100%);
            min-height: 100vh;
        }

        .container { 
            max-width: 850px; 
            margin: 20px auto; 
            background: var(--card-bg); 
            padding: 30px; 
            border-radius: 25px; 
            box-shadow: 0 10px 50px rgba(0,0,0,0.8);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .header { text-align: center; border-bottom: 2px solid var(--gold-primary); padding-bottom: 20px; }
        .logo-row { display: flex; justify-content: center; align-items: center; gap: 30px; margin-bottom: 15px; }
        .logo-row img { width: 120px; height: 120px; object-fit: contain; filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3)); }
        
        /* PANEL DE INVERSI√ìN */
        .investment-card {
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid var(--neon-blue);
            margin: 20px 0;
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.1);
            text-align: center;
        }

        .balance-display { font-size: 28px; color: var(--neon-blue); font-weight: bold; margin: 10px 0; }
        
        input { 
            width: 80%; padding: 15px; border-radius: 12px; border: 1px solid #333; 
            background: #000; color: var(--neon-blue); font-size: 22px; 
            text-align: center; margin: 15px 0; outline: none;
        }

        .btn { 
            padding: 16px 30px; border-radius: 50px; border: none; 
            font-weight: bold; cursor: pointer; transition: 0.3s; width: 90%;
            text-transform: uppercase; margin: 10px 0;
        }
        .btn-connect { background: transparent; color: var(--neon-blue); border: 1px solid var(--neon-blue); }
        .btn-buy { background: var(--neon-blue); color: #000; font-size: 18px; box-shadow: 0 4px 15px rgba(0, 210, 255, 0.3); }
        .btn-buy:hover { transform: translateY(-3px); filter: brightness(1.2); }

        #status { font-size: 13px; color: #888; margin-top: 15px; text-align: center; }

        /* COLUMNAS CON BANDERAS */
        .columns { display: flex; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .column { flex: 1; min-width: 300px; padding: 25px; background: rgba(255,255,255,0.02); border-radius: 20px; border: 1px solid #222; text-align: center; }
        
        .flag-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--gold-primary);
            margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
        }

        .contract-box { 
            background: #000; padding: 12px; border-radius: 8px; border: 1px dashed var(--gold-primary);
            font-family: monospace; font-size: 12px; margin-top: 10px; cursor: pointer; word-break: break-all;
            color: var(--gold-light);
        }
        
        h3 { margin-top: 0; color: var(--gold-primary); }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="logo-row">
            <img src="asset/IMG-20260126-WA0020.jpg" alt="Neo Pisk">
            <img src="asset/Eco Pisk.jpg" alt="Eco Pisk">
        </div>
        <h1>NEO PISK & ECO PISK</h1>
        <p style="color: var(--gold-primary); font-weight: bold; letter-spacing: 1px;">OFFICIAL GOLD PRESALE</p>
    </div>

    <div class="investment-card">
        <button class="btn btn-connect" onclick="conectarBilletera()">üîç CONECTAR BILLETERA / CONNECT WALLET</button>
        <div style="margin-top: 15px;">
            <span style="font-size: 12px; color: #888;">TU BALANCE / YOUR BALANCE:</span>
            <div id="saldoDisplay" class="balance-display">0.00 $PISK</div>
        </div>
        
        <input type="number" id="inputUSDT" placeholder="Monto USDT" step="1">
        
        <button class="btn btn-buy" onclick="ejecutarCompra()">üöÄ COMPRAR $PISK AHORA / BUY NOW</button>
        <div id="status">Ready / Listo (Polygon Network)</div>
    </div>

    <div class="columns">
        <div class="column">
            <img src="https://flagcdn.com/w160/es.png" class="flag-circle" alt="Espa√±a">
            <h3>üá™üá∏ Instrucciones</h3>
            <p style="font-size: 14px; text-align: left;">1. Conecta tu MetaMask.<br>2. Ingresa los USDT.<br>3. Los tokens aparecer√°n en tu saldo autom√°ticamente tras la compra.</p>
            <div class="contract-box" onclick="navigator.clipboard.writeText('0x9d5B2A73d16dAF61712BA8527d94F6997a0E6323'); alert('Copiado');">
                Importar Contrato: 0x9d5B2A73d16dAF61712BA8527d94F6997a0E6323
            </div>
        </div>

        <div class="column">
            <img src="https://flagcdn.com/w160/us.png" class="flag-circle" alt="USA">
            <h3>üá∫üá∏ Instructions</h3>
            <p style="font-size: 14px; text-align: left;">1. Connect your MetaMask.<br>2. Enter USDT amount.<br>3. Tokens will show in your balance automatically after purchase.</p>
            <div class="contract-box" onclick="navigator.clipboard.writeText('0x9d5B2A73d16dAF61712BA8527d94F6997a0E6323'); alert('Copied');">
                Import Contract: 0x9d5B2A73d16dAF61712BA8527d94F6997a0E6323
            </div>
        </div>
    </div>
</div>

<script>
    const contractAddr = "0x07Fc7AC9D681Cdd3D100c68f6f5646970CC7fF60"; 
    const usdtAddr = "0xc2132D05D31c914a87C6611C10748AEb04B58e8F"; 
    const piskAddr = "0x9d5B2A73d16dAF61712BA8527d94F6997a0E6323";

    const ABI_ERC20 = [
        { "constant": false, "inputs": [{ "name": "_spender", "type": "address" }, { "name": "_value", "type": "uint256" }], "name": "approve", "outputs": [{ "name": "", "type": "bool" }], "type": "function" },
        { "constant": true, "inputs": [{ "name": "_owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "name": "balance", "type": "uint256" }], "type": "function" }
    ];

    const ABI_NEO = [
        { "inputs": [{ "internalType": "uint256", "name": "_amountUSDT", "type": "uint256" }], "name": "buyWithUSDT", "outputs": [], "stateMutability": "nonpayable", "type": "function" }
    ];

    async function conectarBilletera() {
        if (!window.ethereum) return alert("Instala MetaMask");
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        actualizarSaldo(accounts[0]);
        document.getElementById("status").innerText = "‚úÖ Billetera conectada / Wallet connected";
    }

    async function actualizarSaldo(account) {
        const web3 = new Web3(window.ethereum);
        const piskContract = new web3.eth.Contract(ABI_ERC20, piskAddr);
        const bal = await piskContract.methods.balanceOf(account).call();
        const display = parseFloat(web3.utils.fromWei(bal, 'ether')).toFixed(2);
        document.getElementById("saldoDisplay").innerText = display + " $PISK";
    }

    async function ejecutarCompra() {
        const status = document.getElementById("status");
        const val = document.getElementById("inputUSDT").value;
        if (!val || val <= 0) return alert("Ingresa un monto / Enter amount");

        const web3 = new Web3(window.ethereum);
        const accounts = await web3.eth.getAccounts();
        const montoFinal = (parseFloat(val) * 1000000).toFixed(0); 

        try {
            status.innerText = "‚è≥ Paso 1/2: Autorizando USDT...";
            const usdt = new web3.eth.Contract(ABI_ERC20, usdtAddr);
            await usdt.methods.approve(contractAddr, montoFinal).send({ from: accounts[0] });

            status.innerText = "üöÄ Paso 2/2: Confirmando Compra...";
            const neo = new web3.eth.Contract(ABI_NEO, contractAddr);
            await neo.methods.buyWithUSDT(montoFinal).send({ from: accounts[0] });

            status.innerText = "üéâ ¬°√âXITO / SUCCESS!";
            actualizarSaldo(accounts[0]);
        } catch (e) {
            status.innerText = "‚ùå Error en transacci√≥n (Revisa tu POL para gas)";
        }
    }
</script>

</body>
</html>
